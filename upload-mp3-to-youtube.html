<html>

<title>合併並轉換mp3為影片檔，並插入一個靜態的圖片，上傳到Youtube</title>
<meta name="description" content="合併並轉換mp3為影片檔，並插入一個靜態的圖片，上傳到Youtube">

<body>



<h1>合併並轉換mp3為影片檔，並插入一個靜態的圖片，上傳到Youtube</h1>

<h2>Merging some mp3 files and converting it to a video with a static photo and uploading to youtube</h2>

<ul>

<li>先下載ffmpeg，到<a href="https://ffmpeg.org/download.html#build-windows">下載首頁</a>，選擇對應的作業系統，並進到下載頁面，例如筆者是用Windows，所以選擇<a href="https://www.gyan.dev/ffmpeg/builds/">Windows builds from gyan.dev</a>。
<br><img width="70%" src="img/upload_mp3_to_youtube/youtube_upload_01.jpg">
</li>

<li>有很多下載點，例如選擇第一個<a href="https://www.gyan.dev/ffmpeg/builds/ffmpeg-git-full.7z">ffmpeg-git-full.7z</a>
<br><img width="70%" src="img/upload_mp3_to_youtube/youtube_upload_02.jpg">
</li>

<li>下載後解壓縮，可以用WinRAR或是7-Zip，解壓縮之後不用安裝，把解壓縮出來的資料夾名稱改簡單一點，放到方便使用命令提示字元切換到的目錄下，例如C:\User\Downloads\ffmpeg
<br><img width="70%" src="img/upload_mp3_to_youtube/youtube_upload_03.jpg">
</li>

<li>把要合併及轉換的mp3檔案及圖片檔也放到C:\User\Downloads\ffmpeg\bin
<br><img width="70%" src="img/upload_mp3_to_youtube/youtube_upload_04.jpg">
</li>

<li>開啟命令提示字元，切換到C:\User\Downloads\ffmpeg\bin，切換的指令如圖所示，如果要退回上一層目錄可以用cd..，有些資料夾名稱太複雜，可以輸入資料夾的前幾個字後，按tab鍵就可以自動切換。
<br><img width="70%" src="img/upload_mp3_to_youtube/youtube_upload_05.jpg">
</li>

<li>首先要先製作一個文字檔，記載要合併的mp3檔案，把這個文字檔存成mylist.txt，一樣放到C:\User\Downloads\ffmpeg\bin。如果有很多mp3檔案，可以在mp3所在的目錄之下，輸入dir > mylist.txt，就可以把該資料夾的檔案名稱輸出成一個文字檔，需要用Excel資料剖析出需要的部分
<br><img width="70%" src="img/upload_mp3_to_youtube/youtube_upload_06.jpg">
</li>

<li>接著合併這些mp3檔案，指令如下，檔案名稱可以自己視情況修改，例如這裡就是合併成output.mp3這個檔案。這個方法是從<a href="https://superuser.com/questions/314239/how-to-join-merge-many-mp3-files">這裡</a>學來的。
<pre>
ffmpeg -f concat -safe 0 -i mylist.txt -c copy output.mp3
</pre>
</li>

<li>把要合併的圖檔一樣放到C:\User\Downloads\ffmpeg\bin，假設在這裡我們要合併cover.jpg圖檔，接著我們要把合併的mp3檔案連同圖片檔轉換成影片檔，指令如下，檔案名稱及格式可以自己視情況修改，這裡我們就是輸出成result.mp4。轉換速度大約是1秒處理60秒的內容，轉換後的大小跟原本的mp3檔差不多。這個方法是從<a href="https://askubuntu.com/questions/868283/image-audio-mp4-how-to-make-video-smaller">這裡</a>學來的。
<pre>
ffmpeg -loop 1 -framerate 1 -i cover.jpg -i output.mp3 -c:v libx264 -preset veryslow -crf 0 -c:a copy -shortest result.mp4
</pre>
<font color="gray">原本是用從<a href="https://superuser.com/questions/1041816/combine-one-image-one-audio-file-to-make-one-video-using-ffmpeg">這裡</a>學來的方法，指令如下，但因為用下面這個方法轉換出來的檔案會變得非常大，200MB的mp3會輸出成9GB，而且轉換速率也慢，1秒轉換7秒。
<pre>
（不建議使用）ffmpeg -loop 1 -y -i cover.jpg -i output.mp3 -shortest -acodec copy -vcodec mjpeg result.avi
</pre>
</font>
</li>

<li>注意到使用上面的方法時，可能會出現height not divisible by 2的錯誤訊息，如果是這樣的話，就按照錯誤訊息的指示，把要插入的圖檔的高度修改成偶數就好。
</li>

</ul>

</body>
</html>